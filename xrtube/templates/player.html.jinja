<video-js id=player controls playsinline poster="{{video.poster.url}}">
    {% if video.manifest_url %}
        <source src="{{proxy(video.manifest_url)}}">
    {% endif %}
</video-js>

{# Putting these attrs on <video-js> causes duplicate triggering #}
<div
    hx-get="{{get_related}}"
    hx-trigger=load
    hx-select=#results
    hx-target=#results
></div>

<link rel=stylesheet href=/static/video-js.min.css>
<script src=/static/video.min.js></script>
<script src=/static/videojs-contrib-quality-levels.js></script>
<script src=/static/jb-videojs-hls-quality-selector.js></script>
<script>
    const player = videojs("player", {
        fill: true,
        liveui: true,
        playbackRates: [3, 2.5, 2, 1.75, 1.5, 1.25, 1, 0.75, 0.5],
    })
    player.hlsQualitySelector({
        displayCurrentQuality: true,
        placementIndex: 12,
    })
</script>
